<?php
class WHook
{
    private static $instance = null;
    private static $hooklist = array();
    private static $usedhooks = array();
    private function __construct()
    {
        
    }
    static function register($name, $function)
    {
        if(!function_exists($function))
            return;
        //make sure hooklist isn't empty
        if(!isset(WHook::$hooklist[$name]))
        {
            WHook::$hooklist[$name] = array($function);
        }
        else
        {
            array_push(WHook::$hooklist[$name],$function);
        }
    }
    static function unregister($name, $function)
    {
        unset(WHook::$hooklist[$name][array_search($function,WHook::$hooklist[$name])]);
    }
    static function call($name, $args = array())
    {
        //make sure hooklist isn't empty
        if(!empty(WHook::$hooklist))
        {
            //check if the hook exists
            if(isset(WHook::$hooklist[$name]))
            {
                if(!empty(WHook::$hooklist[$name]))
                {
                    array_push(WHook::$usedhooks, $name);
                    foreach( WHook::$hooklist[$name] as $hook )
                    {
                        return call_user_func_array($hook, $args);
                    }
                }
            }
        }
    }
    static function getUsedHooks()
    {
        return WHook::$usedhooks;
    }
}

?>